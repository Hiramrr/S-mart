<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: composables/Payment/useCreditCardFormatters.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: composables/Payment/useCreditCardFormatters.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module useCreditCardFormatters
 * @description Un composable de Vue que proporciona un conjunto de utilidades para validar, formatear y procesar información de tarjetas de crédito.
 */
export function useCreditCardFormatters() {
  /**
   * Valida un número de tarjeta de crédito.
   * @param {string} number - El número de tarjeta de crédito a validar.
   * @returns {string|null} El número de tarjeta limpio de 16 dígitos si es válido, de lo contrario, `null`.
   */
  const validateCardNumber = (number) => {
    const cleanNumber = number.replace(/\D/g, '')
    return cleanNumber.length === 16 ? cleanNumber : null
  }

  /**
   * Valida la fecha de expiración de una tarjeta de crédito.
   * @param {string} date - La fecha de expiración en formato 'MM/YY' o 'MM/YYYY'.
   * @returns {boolean} `true` si la fecha es válida y no ha expirado, de lo contrario, `false`.
   */
  const validateExpirationDate = (date) => {
    const regex = /^(0[1-9]|1[0-2])\/?([0-9]{2}|[0-9]{4})$/
    if (!regex.test(date)) return false
    const [monthStr, yearStr] = date.split('/').map((s) => s.trim())
    const month = parseInt(monthStr, 10)
    let year = parseInt(yearStr, 10)
    if (yearStr.length === 2) {
      const currentYearPrefix = new Date().getFullYear().toString().substring(0, 2)
      year = parseInt(currentYearPrefix + yearStr, 10)
    }
    const now = new Date()
    const currentYear = now.getFullYear()
    const currentMonth = now.getMonth() + 1
    if (year &lt; currentYear) return false
    if (year === currentYear &amp;&amp; month &lt; currentMonth) return false
    return true
  }

  /**
   * Formatea un número de tarjeta de crédito para la entrada del usuario, agregando espacios.
   * @param {string} value - El valor de entrada del número de la tarjeta.
   * @returns {string} El número de tarjeta formateado (ej. 'XXXX XXXX XXXX XXXX').
   */
  const formatCardNumberInput = (value) => {
    const cleanValue = value.replace(/\D/g, '')
    const parts = []
    for (let i = 0; i &lt; cleanValue.length; i += 4) {
      parts.push(cleanValue.substring(i, i + 4))
    }
    return parts.join(' ').substring(0, 19) // Limita a 16 dígitos + 3 espacios
  }

  /**
   * Formatea una fecha de expiración para la entrada del usuario, agregando una barra (/).
   * @param {string} value - El valor de entrada de la fecha de expiración.
   * @returns {string} La fecha de expiración formateada ('MM/YY').
   */
  const formatExpirationDateInput = (value) => {
    let cleanValue = value.replace(/\D/g, '')
    if (cleanValue.length > 4) cleanValue = cleanValue.substring(0, 4)
    if (cleanValue.length > 2) {
      return cleanValue.substring(0, 2) + '/' + cleanValue.substring(2)
    }
    return cleanValue
  }

  /**
   * Obtiene los últimos cuatro dígitos de un número de tarjeta.
   * @param {string} number - El número de la tarjeta.
   * @returns {string} Los últimos cuatro dígitos o 'XXXX' si no se proporciona un número.
   */
  const getLastFour = (number) => (number ? number.substring(number.length - 4) : 'XXXX')

  /**
   * Determina el tipo de tarjeta (Visa, MasterCard, etc.) a partir de su número.
   * @param {string} number - El número de la tarjeta.
   * @returns {string} El tipo de tarjeta ('Visa', 'MasterCard', 'Amex', 'Tarjeta').
   */
  const getCardType = (number) => {
    if (!number) return 'Card'
    const cleanNumber = String(number).replace(/\D/g, '')
    if (cleanNumber.startsWith('4')) return 'Visa'
    if (cleanNumber.match(/^5[1-5]/)) return 'MasterCard'
    if (cleanNumber.match(/^3[47]/)) return 'Amex'
    return 'Tarjeta'
  }

  /**
   * Formatea una fecha en formato ISO a una cadena 'MM/YY'.
   * @param {string} isoDate - La fecha en formato de cadena ISO.
   * @returns {string} La fecha formateada como 'MM/YY'.
   */
  const formatExpiryDisplay = (isoDate) => {
    if (!isoDate) return ''
    const date = new Date(isoDate)
    const month = date.getUTCMonth() + 1
    const year = date.getUTCFullYear() % 100
    return `${month &lt; 10 ? '0' + month : month}/${year &lt; 10 ? '0' + year : year}`
  }

  return {
    validateCardNumber,
    validateExpirationDate,
    formatCardNumberInput,
    formatExpirationDateInput,
    getLastFour,
    getCardType,
    formatExpiryDisplay,
  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-useAuthStore.html">useAuthStore</a></li><li><a href="module-useCartStore.html">useCartStore</a></li><li><a href="module-useChat.html">useChat</a></li><li><a href="module-useCounterStore.html">useCounterStore</a></li><li><a href="module-useCreditCardFormatters.html">useCreditCardFormatters</a></li><li><a href="module-useNotificationStore.html">useNotificationStore</a></li><li><a href="module-usePaymentCheckout.html">usePaymentCheckout</a></li><li><a href="module-useProductStore.html">useProductStore</a></li><li><a href="module-useRole.html">useRole</a></li><li><a href="module-useTicketGenerator.html">useTicketGenerator</a></li></ul><h3>Global</h3><ul><li><a href="global.html#LOW_STOCK_THRESHOLD">LOW_STOCK_THRESHOLD</a></li><li><a href="global.html#history">history</a></li><li><a href="global.html#redirectUrl">redirectUrl</a></li><li><a href="global.html#router">router</a></li><li><a href="global.html#routes">routes</a></li><li><a href="global.html#scrollBehavior">scrollBehavior</a></li><li><a href="global.html#subirImagenCloudinary">subirImagenCloudinary</a></li><li><a href="global.html#supabase">supabase</a></li><li><a href="global.html#supabaseAnonKey">supabaseAnonKey</a></li><li><a href="global.html#supabaseUrl">supabaseUrl</a></li><li><a href="global.html#useVentasStore">useVentasStore</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Tue Dec 02 2025 21:31:12 GMT-0600 (hora estándar central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
